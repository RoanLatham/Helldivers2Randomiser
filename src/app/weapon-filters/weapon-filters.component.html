<div class="weapon-filter-section">
  <!-- Main component section -->
  <app-collapsible-section
    [title]="'Weapons'"
    [variant]="'component'"
    [initiallyCollapsed]="weaponCollapsed"
    (toggled)="toggleWeaponCollapse($event)"
  >
    <!-- Primary Weapons category -->
    <app-collapsible-section
      [title]="'Primary Weapons'"
      [variant]="'category'"
      [initiallyCollapsed]="primaryCollapsed"
      (toggled)="togglePrimaryCollapse($event)"
    >
      <div *ngFor="let category of weaponCategories">
        <!-- Category Checkbox - interactive with both classes -->
        <div
          class="weapon-category-label-container weapon-category-checkbox-container"
          (click)="toggleCategory(category)"
        >
          <p class="secondary-text weapon-filter-category">{{ category }}</p>
          <input type="checkbox" [checked]="!isCategoryDissabled(category)" />
        </div>

        <!-- Weapons in this category -->
        <div class="flex-horizontal weapon-filter-container">
          <ng-container
            *ngFor="let weapon of primaryWeaponsForCategory(category)"
          >
            <button
              class="weapon-filter-button"
              (click)="toggleWeapon(weapon.id)"
            >
              <img
                [src]="weapon.iconPath"
                alt="{{ weapon.name }} toggle"
                class="weapon-filter-icon"
                [class.weapon-filter-icon-disabled]="
                  disabledIds.includes(weapon.id)
                "
              />
            </button>
          </ng-container>
        </div>
      </div>
    </app-collapsible-section>

    <!-- Secondary Weapons category -->
    <app-collapsible-section
      [title]="'Secondary Weapons'"
      [variant]="'category'"
      [initiallyCollapsed]="secondaryCollapsed"
      (toggled)="toggleSecondaryCollapse($event)"
    >
      <!-- Non-interactive label - just base class -->
      <div class="weapon-category-label-container">
        <p class="secondary-text weapon-filter-category">Secondary Weapons</p>
      </div>

      <div class="flex-horizontal weapon-filter-container">
        <ng-container *ngFor="let weapon of secondaryWeapons">
          <button
            class="weapon-filter-button"
            (click)="toggleWeapon(weapon.id)"
          >
            <img
              [src]="weapon.iconPath"
              alt="{{ weapon.name }} toggle"
              class="weapon-filter-icon"
              [class.weapon-filter-icon-disabled]="
                disabledIds.includes(weapon.id)
              "
            />
          </button>
        </ng-container>
      </div>
    </app-collapsible-section>

    <!-- Grenades category -->
    <app-collapsible-section
      [title]="'Grenades'"
      [variant]="'category'"
      [initiallyCollapsed]="grenadesCollapsed"
      (toggled)="toggleGrenadesCollapse($event)"
    >
      <!-- Non-interactive label - just base class -->
      <div class="weapon-category-label-container">
        <p class="secondary-text weapon-filter-category">Grenades</p>
      </div>

      <div class="flex-horizontal weapon-filter-container">
        <ng-container *ngFor="let weapon of grenades">
          <button
            class="weapon-filter-button"
            (click)="toggleWeapon(weapon.id)"
          >
            <img
              [src]="weapon.iconPath"
              alt="{{ weapon.name }} toggle"
              class="weapon-filter-icon"
              [class.weapon-filter-icon-disabled]="
                disabledIds.includes(weapon.id)
              "
            />
          </button>
        </ng-container>
      </div>
    </app-collapsible-section>
  </app-collapsible-section>
</div>
